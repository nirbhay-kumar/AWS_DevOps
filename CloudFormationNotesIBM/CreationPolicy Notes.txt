âœ… What is CreationPolicy in CloudFormation?

A CreationPolicy tells CloudFormation:

â€œDo NOT mark this resource as CREATE_COMPLETE until a certain number of success signals are received.â€

It is mainly used with:

Auto Scaling Groups (ASGs)

EC2 Instances

Wait conditions

CloudFormation expects a signal (success or failure), usually sent from the instance using:

cfn-signal (Linux)

cfn-signal.exe (Windows)

The signal is typically sent after:
âœ”ï¸ EC2 bootstrapping
âœ”ï¸ Software installation
âœ”ï¸ Application setup
âœ”ï¸ Health checks

ğŸ§© Your Example
AppAutoScalingGroup: 
  Type: 'AWS::AutoScaling::AutoScalingGroup'
  Properties: 
    MinSize: 2
    ...
  CreationPolicy:    
    ResourceSignal:
      Count: 2
      Timeout: PT15M

ğŸ” Breakdown of Each Line
1. AppAutoScalingGroup:

This is your ASG resource.

2. CreationPolicy:

This attaches a creation policy to the AutoScalingGroup.

3. ResourceSignal:

This tells CloudFormation to wait for signals from instances launched by the ASG.

4. Count: 2

Means CloudFormation expects 2 success signals.

â¡ï¸ This matches your MinSize: 2, so each instance must send a success signal after it finishes bootstrapping.

If fewer than 2 signals arrive â†’ stack creation fails.

5. Timeout: PT15M

CloudFormation will wait 15 minutes for the 2 signals.

PT15M is ISO 8601 duration format:

P = period

T = time

15M = 15 minutes

So:

âœ”ï¸ Maximum wait: 15 minutes
âœ”ï¸ Minimum required signals: 2

ğŸ¯ How This Works in Real Deployment

ASG launches 2 EC2 instances.

On each instance, user-data runs your setup script.

After the instance finishes installing software, it sends:

/opt/aws/bin/cfn-signal --success true --stack $STACK --resource AppAutoScalingGroup --region $REGION


Once CloudFormation receives 2 success signals â†’
CloudFormation marks the AutoScalingGroup resource as CREATE_COMPLETE.

If:

One instance fails to signal

Or takes more than 15 minutes
â†’ Stack creation fails.

ğŸ“Œ Why CreationPolicy Is Needed

Without a CreationPolicy, CloudFormation marks the ASG complete immediately after launching instances â€” even if:

âŒ Applications are not installed
âŒ User-data scripts failed
âŒ Services did not start
âŒ Health checks not passed

CreationPolicy allows you to ensure:

Application setup completes

The environment is truly ready

Configurations do not silently fail

ğŸ¢ Real Consultant Use Cases

Web servers must complete installation before going ONLINE

Instances must register with a load balancer

Database initialization must succeed

Custom bootstrap scripts must finish