1Ô∏è‚É£ What are StackSets?

StackSets = CloudFormation + Multi-Account + Multi-Region deployment.

In simple words:

StackSets let you deploy the same CloudFormation stack to multiple AWS accounts and regions from a single place.

You write one template, choose:

Which AWS Accounts (or AWS Organizations OUs)

Which Regions

‚Ä¶and AWS automatically creates stacks everywhere.

2Ô∏è‚É£ Why Consultants Use StackSets? (Real Project Examples)
‚úîÔ∏è Scenario 1 ‚Äî Security Baseline for All Accounts

A company with 200 AWS accounts wants:

IAM roles

CloudTrail

Config rules
Same in every account.

StackSets ‚Üí Deploy once ‚Üí Goes to all 200 accounts.

‚úîÔ∏è Scenario 2 ‚Äî Standard Networking Across Regions

Deploy:

VPC

Subnets

Route tables
Across 5 regions automatically.

‚úîÔ∏è Scenario 3 ‚Äî Guardrails for Enterprise Landing Zone (LZ)

When new accounts are created inside AWS Organizations:

StackSets automatically deploy baseline IAM roles

S3 logging buckets

CloudWatch alarms

Auto-deployment to new accounts ‚Üí Zero manual work.

3Ô∏è‚É£ StackSets Deployment Models (IMPORTANT for Training)

There are 2 modes:

A. SELF-MANAGED MODE

You manually configure:

Admin account

Execution accounts (target accounts)

You must set trust relationships manually.

Useful for:

No AWS Organizations setup

Training, demo, small companies

B. SERVICE-MANAGED MODE (AWS Organizations)

Automatically uses:

AWS Organizations

Deploys to Organizational Units (OUs)

Benefits:

No manual IAM role creation

Auto-deploy to new accounts in the OU

Most common in enterprises

This is the model used in Landing Zone, Control Tower, and large enterprises.

4Ô∏è‚É£ StackSet Component Overview
StackSet ‚Üí Stack Instances ‚Üí Stacks

StackSet
The master configuration + template.

Stack Instances
Mapping of:

Account IDs

Regions

Stacks
Actual deployed stacks in each target account & region.

5Ô∏è‚É£ Sample Template for StackSet Demo

Here is a small CloudFormation template you can use:

üëâ Creates an S3 bucket (simple, safe for multi-account deployments)
AWSTemplateFormatVersion: "2010-09-09"
Description: Sample StackSet Template - S3 Bucket

Resources:
  DemoBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Sub "stackset-demo-bucket-${AWS::AccountId}-${AWS::Region}"

6Ô∏è‚É£ üî• Hands-On Lab: StackSets (Service-Managed) ‚Äî Step-by-Step

LAB: Deploy a StackSet Across Multiple Accounts and Regions
Prerequisites:

‚úî AWS Organizations enabled
‚úî You are logged in as the management/administrator account

STEP 1 ‚Äî Prepare the CloudFormation Template

Create a file: stackset-s3.yaml
Paste the template above.

STEP 2 ‚Äî Open CloudFormation StackSets

Go to:

AWS Console ‚Üí CloudFormation ‚Üí StackSets

Click Create StackSet.

STEP 3 ‚Äî Choose ‚ÄúUpload a Template File‚Äù

Upload your stackset-s3.yaml.

Click Next.

STEP 4 ‚Äî Choose Deployment Model

Select:

‚úî Service-managed permissions (recommended)

CloudFormation uses AWS Organizations automatically.

STEP 5 ‚Äî Select Deployment Targets

Choose:

1) Specify OUs (Organizational Units)

Select an OU (ex: "Sandbox", "Dev", or "All Accounts").

OR
2) Specify individual AWS account IDs
STEP 6 ‚Äî Select Deployment Regions

Choose multiple regions, e.g.:

ap-south-1

us-east-1

eu-west-1

STEP 7 ‚Äî Set Deployment Options

Important fields:

Region concurrency

Parallel (faster)

Sequential (safer)

Failure tolerance

How many accounts/regions can fail before deployment stops.

STEP 8 ‚Äî Execute the StackSet

Click Submit.

CloudFormation will:

Create Stack Instances

Deploy Stacks into each account + region

This may take a few minutes.

STEP 9 ‚Äî Verify Deployment

On StackSet ‚Üí Click the StackSet name ‚Üí Stack Instances tab.

You will see:

Account	Region	Status
123456789012	ap-south-1	CREATE_COMPLETE
123456789012	us-east-1	CREATE_COMPLETE
234567890123	ap-south-1	CREATE_COMPLETE

STEP 10 ‚Äî Validate in Target Accounts

Login to a target account.

Go to S3 Console ‚Üí You should see buckets like:

stackset-demo-bucket-123456789012-ap-south-1

7Ô∏è‚É£ What Happens When You Update the StackSet?

Update the template ‚Üí StackSets will:

Push the change to all target accounts/regions

Automatically update the child stacks

Respect the same concurrency & failure tolerance rules

8Ô∏è‚É£ What Happens When You Add a New Account to the OU?

In Service-managed mode:

‚û°Ô∏è StackSets automatically deploy to the new account
‚û°Ô∏è No human action needed

This is extremely important for enterprise onboarding workflows.

9Ô∏è‚É£ StackSets Deletion Behavior

When you delete a StackSet:

Child stacks are deleted automatically

You can retain stacks if you choose